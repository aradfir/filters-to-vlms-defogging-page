<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="description"
        content="From Filters to VLMs: Benchmarking Defogging Methods through Object Detection and Segmentation Performance.">
  <meta name="keywords" content="Defogging, Object Detection, Segmentation, Autonomous Driving, VLM, Dehazing">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>From Filters to VLMs: Benchmarking Defogging Methods</title>

  <link href="https://fonts.googleapis.com/css?family=Google+Sans|Noto+Sans|Castoro" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jpswalsh/academicons@1/css/academicons.min.css">

  <style>
    body {
      font-family: 'Noto Sans', sans-serif;
    }
    .title.is-1 {
      font-family: 'Google Sans', sans-serif;
      font-weight: 700;
    }
    .title.is-2, .title.is-3 {
      font-family: 'Google Sans', sans-serif;
      font-weight: 500;
    }
    .publication-title {
      font-family: 'Google Sans', sans-serif;
    }
    .publication-authors {
      font-family: 'Google Sans', sans-serif;
    }
    .publication-venue {
        color: #555;
        width: 100%;
        font-weight: bold;
    }
    .footer .icon-link {
        font-size: 25px;
        color: #000;
    }
    .link-block a {
        margin-top: 5px;
        margin-bottom: 5px;
    }

    /* Comparison Container Styles */
    .comparison-container {
        position: relative;
        width: 100%;
        max-width: 800px;
        margin: 0 auto;
        border-radius: 8px;
        overflow: hidden;
        box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        background-color: #f5f5f5;
        min-height: 400px;
    }
    .comparison-image {
        width: 100%;
        height: auto;
        display: block;
        transition: opacity 0.3s ease;
    }
    
    /* Control Styles */
    .controls-container {
        max-width: 800px;
        margin: 0 auto;
        padding: 20px 0;
    }
    .control-label {
        font-family: 'Google Sans', sans-serif;
        font-weight: 600;
        color: #4a4a4a;
        margin-bottom: 8px;
        display: block;
        text-align: center;
    }
    
    /* Tabs Customization */
    .tabs.is-toggle li.is-active a {
        background-color: #3273dc;
        border-color: #3273dc;
    }
    .tabs.is-toggle {
        margin-bottom: 15px;
    }
    /* Make tabs wrap nicely on small screens */
    .tabs.is-toggle ul {
        flex-wrap: wrap;
        justify-content: center;
    }
    .tabs.is-toggle li {
        flex-grow: 1;
        flex-shrink: 0;
        min-width: 120px;
    }
    .tabs.is-toggle li a {
        flex-direction: column;
        padding: 8px 10px;
        min-height: 60px;
        justify-content: center;
    }
    .tabs.is-toggle li a > span:not(.tab-badge) {
        display: block;
    }
    
    /* Tab Badges */
    .tab-badge {
        font-size: 0.7rem;
        background-color: #eee;
        color: #333;
        border-radius: 4px;
        padding: 2px 8px;
        margin-left: 0;
        margin-top: 4px;
        max-width: 100%;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        font-weight: normal;
        display: block;
    }
    .tabs.is-toggle li.is-active .tab-badge {
        background-color: rgba(255,255,255,0.3);
        color: #fff;
    }

    /* Selector Row */
    .selector-row {
        display: flex;
        justify-content: center;
        gap: 15px;
        margin-bottom: 20px;
        align-items: center;
        flex-wrap: wrap;
    }
    .select-wrapper {
        text-align: left;
    }
    .select-label {
        font-size: 0.85em;
        font-weight: 600;
        color: #666;
        margin-bottom: 4px;
        display: block;
    }

    /* Scene Grid Selector */
    .scene-grid {
        display: flex;
        flex-direction: column;
        gap: 10px;
        margin-bottom: 25px;
        background: #fff;
        padding: 15px;
        border-radius: 8px;
        border: 1px solid #eee;
    }
    .scene-row {
        display: flex;
        align-items: center;
        gap: 15px;
    }
    .scene-row-label {
        width: 140px;
        font-weight: 600;
        text-align: right;
        font-size: 0.9rem;
        color: #555;
    }
    .scene-row-buttons {
        display: flex;
        gap: 8px;
        flex-wrap: wrap;
    }
    .btn-scene {
        background-color: #fff;
        border: 1px solid #dbdbdb;
        color: #363636;
        cursor: pointer;
        padding: 6px 12px;
        border-radius: 4px;
        font-size: 0.9rem;
        font-weight: 600;
        transition: all 0.2s;
    }
    .btn-scene:hover {
        background-color: #f5f5f5;
    }
    .btn-scene.is-active {
        background-color: #363636;
        color: #fff;
        border-color: #363636;
    }

    .teaser .hero-body {
        padding-top: 0;
        padding-bottom: 3rem;
    }
    .teaser {
        font-family: 'Google Sans', sans-serif;
    }
    
    /* Debug/Helper text */
    .method-display-text {
        text-align: center;
        font-size: 0.8em;
        color: #888;
        margin-top: 5px;
        font-family: monospace;
    }
  </style>
</head>
<body>

<section class="hero">
  <div class="hero-body">
    <div class="container is-max-desktop">
      <div class="columns is-centered">
        <div class="column has-text-centered">
          <h1 class="title is-1 publication-title">From Filters to VLMs: Benchmarking Defogging Methods through Object Detection and Segmentation Performance</h1>
          <div class="is-size-5 publication-authors">
            <span class="author-block">
              <a href="#">Ardalan Aryashad</a>,</span>
            <span class="author-block">
              <a href="#">Parsa Razmara</a>,</span>
            <span class="author-block">
              <a href="#">Amin Mahjoub</a>,</span>
            <span class="author-block">
              <a href="#">Seyedarmin Azizi</a>,</span>
            <span class="author-block">
              <a href="#">Mahdi Salmani</a>,</span>
            <span class="author-block">
              <a href="#">Arad Firouzkouhi</a>
            </span>
          </div>

          <div class="is-size-5 publication-authors">
            <span class="author-block">University of Southern California</span>
          </div>

          <div class="column has-text-centered">
            <div class="publication-links">
              <!-- PDF Link. -->
              <span class="link-block">
                <a href="https://arxiv.org/abs/2510.03906"
                   class="external-link button is-normal is-rounded is-dark">
                  <span class="icon">
                      <i class="fas fa-file-pdf"></i>
                  </span>
                  <span>Paper</span>
                </a>
              </span>
              <!-- Code Link. -->
              <span class="link-block">
                <a href="https://github.com/prazmara/defog-detection-benchmark"
                   class="external-link button is-normal is-rounded is-dark">
                  <span class="icon">
                      <i class="fab fa-github"></i>
                  </span>
                  <span>Code</span>
                  </a>
              </span>
              <!-- Data Link. -->
              <span class="link-block">
                <a href="https://www.cityscapes-dataset.com/dataset-overview/"
                   class="external-link button is-normal is-rounded is-dark">
                  <span class="icon">
                      <i class="far fa-images"></i>
                  </span>
                  <span>Dataset</span>
                  </a>
              </span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Teaser / Main Visual -->
<section class="hero teaser">
  <div class="container is-max-desktop">
    <div class="hero-body">
      
      <!-- Top: Scene Selection Grid -->
      <span class="control-label">1. Select Dataset & Scene</span>
      <div class="scene-grid">
          <!-- Row 1: ACDC -->
          <div class="scene-row">
              <div class="scene-row-label">ACDC</div>
              <div class="scene-row-buttons">
                  <button class="btn-scene is-active" onclick="setScene('ACDC', 'Scene 1', this)">Scene 1</button>
                  <button class="btn-scene" onclick="setScene('ACDC', 'Scene 2', this)">Scene 2</button>
                  <button class="btn-scene" onclick="setScene('ACDC', 'Scene 3', this)">Scene 3</button>
              </div>
          </div>
          <!-- Row 2: Foggy Cityscapes -->
          <div class="scene-row">
              <div class="scene-row-label">Foggy Cityscapes</div>
              <div class="scene-row-buttons">
                  <button class="btn-scene" onclick="setScene('Cityscapes', 'Frankfurt 1', this)">Frankfurt 1</button>
                  <button class="btn-scene" onclick="setScene('Cityscapes', 'Lindau', this)">Lindau</button>
                  <button class="btn-scene" onclick="setScene('Cityscapes', 'Frankfurt 2', this)">Frankfurt 2</button>
              </div>
          </div>
      </div>

      <!-- Middle: Display Area -->
      <div class="comparison-container">
          <img id="main-display" src="" alt="Defogging Comparison" class="comparison-image" onerror="handleImageError(this)">
      </div>
      <div id="method-debug" class="method-display-text"></div>

      <!-- Bottom: Controls -->
      <div class="controls-container">
        
        <!-- Pipeline Strategy (Tabs) -->
        <span class="control-label">2. Configure Pipeline Strategy</span>
        <div class="tabs is-toggle is-fullwidth is-small is-rounded" id="pipeline-tabs">
            <ul>
                <li class="is-active" data-tab="baselines" onclick="setStrategy('baselines')">
                    <a>
                        <span class="icon is-small"><i class="fas fa-grip-lines"></i></span>
                        <span>Baselines</span>
                        <span class="tab-badge" id="badge-baselines">Foggy</span>
                    </a>
                </li>
                <li data-tab="filter-only" onclick="setStrategy('filter-only')">
                    <a>
                        <span class="icon is-small"><i class="fas fa-filter"></i></span>
                        <span>Filter</span>
                        <span class="tab-badge" id="badge-filter-only">CLAHE</span>
                    </a>
                </li>
                <li data-tab="model-only" onclick="setStrategy('model-only')">
                    <a>
                        <span class="icon is-small"><i class="fas fa-robot"></i></span>
                        <span>Model</span>
                        <span class="tab-badge" id="badge-model-only">Dehaze...</span>
                    </a>
                </li>
                <li data-tab="filter-model" onclick="setStrategy('filter-model')">
                    <a>
                        <span class="icon is-small"><i class="fas fa-arrow-right"></i></span>
                        <span>F&rarr;M</span>
                        <span class="tab-badge" id="badge-filter-model">Chain</span>
                    </a>
                </li>
                <li data-tab="model-filter" onclick="setStrategy('model-filter')">
                    <a>
                        <span class="icon is-small"><i class="fas fa-arrow-left"></i></span>
                        <span>M&rarr;F</span>
                        <span class="tab-badge" id="badge-model-filter">Chain</span>
                    </a>
                </li>
                <li data-tab="vlm" onclick="setStrategy('vlm')">
                    <a>
                        <span class="icon is-small"><i class="fas fa-brain"></i></span>
                        <span>Gen VLM</span>
                        <span class="tab-badge" id="badge-vlm">NanoBan...</span>
                    </a>
                </li>
            </ul>
        </div>

        <!-- Component Selection (Dynamic) -->
        <div class="selector-row" id="selector-container">
            <!-- This content is injected by JS based on strategy -->
        </div>

      </div>
      
      <h2 class="subtitle has-text-centered" style="margin-top: 15px;">
        <span class="dnerf">Comparison</span> of defogging pipelines on ACDC and Foggy Cityscapes datasets.
      </h2>
    </div>
  </div>
</section>

<!-- ... (Rest of sections: Abstract, Quantitative Results, BibTeX, Footer) ... -->
<section class="section">
    <div class="container is-max-desktop">
      <div class="columns is-centered has-text-centered">
        <div class="column is-four-fifths">
          <h2 class="title is-3">Abstract</h2>
          <div class="content has-text-justified">
            <p>
              Autonomous driving perception systems are particularly vulnerable in foggy conditions...
            </p>
          </div>
        </div>
      </div>
    </div>
</section>

<section class="section" id="BibTeX">
  <div class="container is-max-desktop content">
    <h2 class="title">BibTeX</h2>
    <pre><code>@inproceedings{aryashad2026vlmdefog,
  title={{From Filters to VLMs: Benchmarking Defogging Methods through Object Detection and Segmentation Performance}},
  author={Aryashad, Ardalan and Razmara, Parsa and Mahjoub, Amin and Azizi, Seyedarmin and Salmani, Mahdi and Firouzkouhi, Arad},
  booktitle={Winter Conference on Applications of Computer Vision (WACV)},
  year={2026}
}</code></pre>
  </div>
</section>

<footer class="footer">
    <div class="container">
      <div class="content has-text-centered">
        <p>Licensed under CC-BY-SA 4.0.</p>
      </div>
    </div>
</footer>

<script>
    // --- Data Definitions ---
    
    // Method Definitions with Label -> Folder Name mapping
    const methodMap = {
        // Filters
        'CLAHE': 'clh',
        'DCP': 'dcp',
        'MSR': 'msr',
        
        // Models
        'DehazeFormer (Base)': 'dhf',
        'DehazeFormer (Retrained)': 'dhft',
        'FocalNet': 'fcn',
        'Flux': 'flux',
        'MITNet': 'mit',
        
        // VLMs
        'NanoBanana': 'nanobanana',
        'Flux + CoT': 'flux_cot'
    };
    
    // Reverse map for labels
    const filters = ['CLAHE', 'DCP', 'MSR'];
    const models = ['DehazeFormer (Base)', 'DehazeFormer (Retrained)', 'FocalNet', 'MITNet'];
    const vlms = ['NanoBanana', 'Flux + CoT'];
    const baselines = ['Foggy Input', 'Ground Truth'];

    // Scene Definitions - Updated with actual filenames from directories
    const sceneConfig = {
        'ACDC': {
            'Scene 1': 'GOPR0476_frame_000845_rgb_anon.png',
            'Scene 2': 'GP010476_frame_000073_rgb_anon.png', 
            'Scene 3': 'GP020475_frame_000109_rgb_anon.png'
        },
        'Cityscapes': {
            'Frankfurt 1': 'frankfurt_000000_001236',
            'Lindau': 'lindau_000055_000019',
            'Frankfurt 2': 'frankfurt_000001_005184'
        }
    };

    // --- State Management ---
    let savedConfigs = {
        'baselines': { stage1: 'Foggy Input', stage2: null },
        'filter-only': { stage1: filters[0], stage2: null },
        'model-only': { stage1: models[0], stage2: null },
        'filter-model': { stage1: filters[0], stage2: models[0] },
        'model-filter': { stage1: models[0], stage2: filters[0] },
        'vlm': { stage1: vlms[0], stage2: null }
    };

    let activeState = {
        dataset: 'ACDC',
        scene: 'Scene 1',
        strategy: 'baselines',
        stage1: 'Foggy Input',
        stage2: null
    };

    // --- Initialization ---
    document.addEventListener('DOMContentLoaded', () => {
        renderSelectors();
        updateDisplay(); 
        updateAllBadges();
    });

    // --- Logic ---

    function setScene(dataset, sceneName, btn) {
        activeState.dataset = dataset;
        activeState.scene = sceneName;
        
        // Update UI: Remove active from ALL scene buttons first
        document.querySelectorAll('.btn-scene').forEach(b => b.classList.remove('is-active'));
        // Add active to clicked
        btn.classList.add('is-active');

        updateDisplay();
    }

    function setStrategy(strategy) {
        activeState.strategy = strategy;
        
        const config = savedConfigs[strategy];
        activeState.stage1 = config.stage1;
        activeState.stage2 = config.stage2;

        updateTabsUI();
        renderSelectors();
        updateDisplay();
    }
    
    function updateSelection(stage, value) {
        if (stage === 1) activeState.stage1 = value;
        if (stage === 2) activeState.stage2 = value;

        savedConfigs[activeState.strategy].stage1 = activeState.stage1;
        savedConfigs[activeState.strategy].stage2 = activeState.stage2;
        
        updateBadge(activeState.strategy);
        updateDisplay();
    }

    function updateTabsUI() {
        document.querySelectorAll('#pipeline-tabs li').forEach(li => {
            if (li.getAttribute('data-tab') === activeState.strategy) {
                li.classList.add('is-active');
            } else {
                li.classList.remove('is-active');
            }
        });
    }

    function updateAllBadges() {
        Object.keys(savedConfigs).forEach(strat => updateBadge(strat));
    }

    function updateBadge(strategy) {
        const config = savedConfigs[strategy];
        const badge = document.getElementById(`badge-${strategy}`);
        if (!badge) return;

        let text = '';
        if (strategy === 'filter-model' || strategy === 'model-filter') {
            text = 'Chain'; 
        } else {
            text = config.stage1;
        }
        if (text.length > 12) text = text.substring(0, 10) + '..';
        badge.innerText = text;
    }

    function renderSelectors() {
        const container = document.getElementById('selector-container');
        container.innerHTML = ''; 

        const strat = activeState.strategy;

        if (strat === 'baselines') {
            container.appendChild(createSelect('Baseline Method', baselines, activeState.stage1, (val) => updateSelection(1, val)));
        }
        else if (strat === 'filter-only') {
            container.appendChild(createSelect('Filter Method', filters, activeState.stage1, (val) => updateSelection(1, val)));
        }
        else if (strat === 'model-only') {
            container.appendChild(createSelect('Model Method', models, activeState.stage1, (val) => updateSelection(1, val)));
        }
        else if (strat === 'vlm') {
            container.appendChild(createSelect('VLM Method', vlms, activeState.stage1, (val) => updateSelection(1, val)));
        }
        else if (strat === 'filter-model') {
            container.appendChild(createSelect('Step 1: Filter', filters, activeState.stage1, (val) => updateSelection(1, val)));
            const arrow = document.createElement('div');
            arrow.innerHTML = '<i class="fas fa-arrow-right" style="color:#888; margin-top: 25px;"></i>';
            container.appendChild(arrow);
            container.appendChild(createSelect('Step 2: Model', models, activeState.stage2, (val) => updateSelection(2, val)));
        } 
        else if (strat === 'model-filter') {
            container.appendChild(createSelect('Step 1: Model', models, activeState.stage1, (val) => updateSelection(1, val)));
            const arrow = document.createElement('div');
            arrow.innerHTML = '<i class="fas fa-arrow-right" style="color:#888; margin-top: 25px;"></i>';
            container.appendChild(arrow);
            container.appendChild(createSelect('Step 2: Filter', filters, activeState.stage2, (val) => updateSelection(2, val)));
        }
    }

    function createSelect(label, options, selectedValue, onChange) {
        const wrapper = document.createElement('div');
        wrapper.className = 'select-wrapper';
        const labelEl = document.createElement('span');
        labelEl.className = 'select-label';
        labelEl.innerText = label;
        wrapper.appendChild(labelEl);
        const bulmaSelect = document.createElement('div');
        bulmaSelect.className = 'select';
        const select = document.createElement('select');
        options.forEach(opt => {
            const option = document.createElement('option');
            option.value = opt;
            option.innerText = opt;
            if (opt === selectedValue) option.selected = true;
            select.appendChild(option);
        });
        select.addEventListener('change', (e) => onChange(e.target.value));
        bulmaSelect.appendChild(select);
        wrapper.appendChild(bulmaSelect);
        return wrapper;
    }

    // --- Path Generation Logic ---

    function getFolderAndFile() {
        const ds = activeState.dataset;
        const strat = activeState.strategy;
        const s1 = activeState.stage1;
        const s2 = activeState.stage2;
        const sceneKey = sceneConfig[ds][activeState.scene];
        
        const abbr1 = s1 ? methodMap[s1] : '';
        const abbr2 = s2 ? methodMap[s2] : '';

        if (ds === 'Cityscapes') {
            // Extract city name from scene key
            const city = sceneKey.split('_')[0]; // frankfurt, lindau, munster
            let folder = '';
            let suffix = '_leftImg8bit.png';

            if (strat === 'baselines') {
                if (s1 === 'Foggy Input') {
                    folder = 'foggy_beta_0.01';
                } else if (s1 === 'Ground Truth') {
                    folder = 'leftImg8bit';
                }
            }
            else if (strat === 'filter-only') {
                // Filter-only uses foggy_beta_0.01_{filter} format
                // CLAHE uses uppercase, others use lowercase
                let filterSuffix = abbr1 === 'clh' ? 'CLAHE' : abbr1;
                folder = `foggy_beta_0.01_${filterSuffix}`;
            }
            else if (strat === 'model-only') {
                // Model-only uses b01_{model} format
                folder = `b01_${abbr1}`;
            }
            else if (strat === 'vlm') {
                // VLM uses b01_{vlm} format with special suffixes
                folder = `b01_${abbr1}`;
                if (s1 === 'Flux + CoT') {
                    suffix = '_leftImg8bit_foggy_beta_0.01_defogged.png';
                } else if (s1 === 'NanoBanana') {
                    suffix = '_defogged_nano.png';
                }
            }
            else if (strat === 'filter-model') {
                // Filter then Model: b01_{filter}_{model}
                // All use lowercase for filters in chains
                folder = `b01_${abbr1}_${abbr2}`;
            }
            else if (strat === 'model-filter') {
                // Model then Filter: b01_{model}_{filter}
                // CLAHE uses lowercase 'clh' in chains
                folder = `b01_${abbr1}_${abbr2}`;
            }
            
            return `./static/foggy_cityscape/${folder}/val/${city}/${sceneKey}${suffix}`;

        } else {
            // ACDC Dataset
            const filename = sceneKey;
            let folder = '';
            let suffix = '';

            if (strat === 'baselines') {
                if (s1 === 'Foggy Input') {
                    folder = 'rgb_anon';
                } else if (s1 === 'Ground Truth') {
                    // GT has special nested structure
                    const seq = filename.split('_')[0]; // GOPR0476 or GP010476 or GP020475
                    const base = filename.replace('_rgb_anon.png', '');
                    return `./static/ACDC/gt_panoptic/fog/val/${seq}/${base}_gt_panoptic.png`;
                }
            }
            else if (strat === 'filter-only') {
                folder = abbr1;
            }
            else if (strat === 'model-only') {
                folder = abbr1;
            }
            else if (strat === 'vlm') {
                // VLM methods use their abbreviation as folder name with special suffixes
                folder = abbr1;
                if (s1 === 'Flux + CoT') {
                    // Replace _rgb_anon.png with _rgb_anon_defogged.png
                    const base = filename.replace('_rgb_anon.png', '');
                    return `./static/ACDC/${folder}/${base}_rgb_anon_defogged.png`;
                } else if (s1 === 'NanoBanana') {
                    // Replace .png with _defogged.png (keeps _rgb_anon)
                    const base = filename.replace('.png', '');
                    return `./static/ACDC/${folder}/${base}_defogged.png`;
                }
            }
            else if (strat === 'filter-model') {
                folder = `${abbr1}_${abbr2}`;
            }
            else if (strat === 'model-filter') {
                // Model->Filter chains in ACDC use uppercase CLAHE
                let filterAbbr = abbr2 === 'clh' ? 'CLAHE' : abbr2;
                folder = `${abbr1}_${filterAbbr}`;
            }
            
            return `./static/ACDC/${folder}/${filename}`;
        }
    }

    function updateDisplay() {
        const path = getFolderAndFile();
        
        // Debug Text
        const stratInfo = (activeState.strategy.includes('chain') || activeState.strategy.includes('-')) 
            ? `${activeState.stage1} + ${activeState.stage2 || ''}` 
            : activeState.stage1;
        document.getElementById('method-debug').innerText = 
            `Dataset: ${activeState.dataset} | Scene: ${activeState.scene} | Method: ${stratInfo}\nPath: ${path}`;

        const img = document.getElementById('main-display');
        img.style.opacity = '0.5';
        console.log('Loading image from path:', path);
        console.log('Full URL:', new URL(path, window.location.href).href);
        setTimeout(() => {
            img.src = path;
            img.style.opacity = '1';
        }, 50);
    }
    
    function handleImageError(img) {
        // Fallback to placeholder if local file is missing
        const text = encodeURIComponent("Image Not Found\n" + activeState.dataset + "\n" + activeState.strategy);
        img.src = `https://placehold.co/800x400?text=${text}`;
    }

</script>

</body>
</html>