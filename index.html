<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="description"
        content="From Filters to VLMs: Benchmarking Defogging Methods through Object Detection and Segmentation Performance.">
  <meta name="keywords" content="Defogging, Object Detection, Segmentation, Autonomous Driving, VLM, Dehazing">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>From Filters to VLMs: Benchmarking Defogging Methods</title>

  <link href="https://fonts.googleapis.com/css?family=Google+Sans|Noto+Sans|Castoro" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jpswalsh/academicons@1/css/academicons.min.css">

  <style>
    body {
      font-family: 'Noto Sans', sans-serif;
    }
    .title.is-1 {
      font-family: 'Google Sans', sans-serif;
      font-weight: 700;
    }
    .title.is-2, .title.is-3 {
      font-family: 'Google Sans', sans-serif;
      font-weight: 500;
    }
    .publication-title {
      font-family: 'Google Sans', sans-serif;
    }
    .publication-authors {
      font-family: 'Google Sans', sans-serif;
    }
    .publication-venue {
        color: #555;
        width: 100%;
        font-weight: bold;
    }
    .footer .icon-link {
        font-size: 25px;
        color: #000;
    }
    .link-block a {
        margin-top: 5px;
        margin-bottom: 5px;
    }

    /* Comparison Container Styles */
    .comparison-container {
        position: relative;
        width: 100%;
        max-width: 800px;
        margin: 0 auto;
        border-radius: 8px;
        overflow: hidden;
        box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        background-color: #f5f5f5;
        min-height: 400px;
    }
    .comparison-image {
        width: 100%;
        height: auto;
        display: block;
        transition: opacity 0.3s ease;
    }
    
    /* Control Styles */
    .controls-container {
        max-width: 800px;
        margin: 0 auto;
        padding: 20px 0;
    }
    .control-label {
        font-family: 'Google Sans', sans-serif;
        font-weight: 600;
        color: #4a4a4a;
        margin-bottom: 8px;
        display: block;
        text-align: center;
    }
    
    /* Tabs Customization */
    .tabs.is-toggle li.is-active a {
        background-color: #3273dc;
        border-color: #3273dc;
    }
    .tabs.is-toggle {
        margin-bottom: 15px;
    }
    /* Make tabs wrap nicely on small screens */
    .tabs.is-toggle ul {
        flex-wrap: wrap;
        justify-content: center;
    }
    .tabs.is-toggle li {
        flex-grow: 1;
        flex-shrink: 0;
    }
    
    /* Tab Badges */
    .tab-badge {
        font-size: 0.75rem;
        background-color: #eee;
        color: #333;
        border-radius: 4px;
        padding: 2px 6px;
        margin-left: 8px;
        max-width: 100px;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        font-weight: normal;
        display: inline-block;
        vertical-align: middle;
    }
    .tabs.is-toggle li.is-active .tab-badge {
        background-color: rgba(255,255,255,0.3);
        color: #fff;
    }

    /* Selector Row */
    .selector-row {
        display: flex;
        justify-content: center;
        gap: 15px;
        margin-bottom: 20px;
        align-items: center;
        flex-wrap: wrap;
    }
    .select-wrapper {
        text-align: left;
    }
    .select-label {
        font-size: 0.85em;
        font-weight: 600;
        color: #666;
        margin-bottom: 4px;
        display: block;
    }

    /* Scene Buttons */
    .btn-group {
        display: flex;
        justify-content: center;
        gap: 10px;
        flex-wrap: wrap;
        margin-bottom: 15px; /* Added spacing below scene selector */
    }
    .btn-scene {
        background-color: #fff;
        border: 1px solid #dbdbdb;
        color: #363636;
        cursor: pointer;
        padding: 8px 16px;
        border-radius: 4px;
        font-weight: 600;
        transition: all 0.2s;
    }
    .btn-scene:hover {
        background-color: #f5f5f5;
    }
    .btn-scene.is-active {
        background-color: #363636;
        color: #fff;
        border-color: #363636;
    }

    .teaser .hero-body {
        padding-top: 0;
        padding-bottom: 3rem;
    }
    .teaser {
        font-family: 'Google Sans', sans-serif;
    }
    
    /* Debug/Helper text */
    .method-display-text {
        text-align: center;
        font-size: 0.9em;
        color: #888;
        margin-top: 5px;
        font-family: monospace;
    }
  </style>
</head>
<body>

<section class="hero">
  <div class="hero-body">
    <div class="container is-max-desktop">
      <div class="columns is-centered">
        <div class="column has-text-centered">
          <h1 class="title is-1 publication-title">From Filters to VLMs: Benchmarking Defogging Methods through Object Detection and Segmentation Performance</h1>
          <div class="is-size-5 publication-authors">
            <span class="author-block">
              <a href="#">Ardalan Aryashad</a>,</span>
            <span class="author-block">
              <a href="#">Parsa Razmara</a>,</span>
            <span class="author-block">
              <a href="#">Amin Mahjoub</a>,</span>
            <span class="author-block">
              <a href="#">Seyedarmin Azizi</a>,</span>
            <span class="author-block">
              <a href="#">Mahdi Salmani</a>,</span>
            <span class="author-block">
              <a href="#">Arad Firouzkouhi</a>
            </span>
          </div>

          <div class="is-size-5 publication-authors">
            <span class="author-block">University of Southern California</span>
          </div>

          <div class="column has-text-centered">
            <div class="publication-links">
              <!-- PDF Link. -->
              <span class="link-block">
                <a href="https://arxiv.org/abs/2510.03906"
                   class="external-link button is-normal is-rounded is-dark">
                  <span class="icon">
                      <i class="fas fa-file-pdf"></i>
                  </span>
                  <span>Paper</span>
                </a>
              </span>
              <!-- Code Link. -->
              <span class="link-block">
                <a href="https://github.com/prazmara/defog-detection-benchmark"
                   class="external-link button is-normal is-rounded is-dark">
                  <span class="icon">
                      <i class="fab fa-github"></i>
                  </span>
                  <span>Code</span>
                  </a>
              </span>
              <!-- Data Link. -->
              <span class="link-block">
                <a href="https://www.cityscapes-dataset.com/dataset-overview/"
                   class="external-link button is-normal is-rounded is-dark">
                  <span class="icon">
                      <i class="far fa-images"></i>
                  </span>
                  <span>Dataset</span>
                  </a>
              </span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Teaser / Main Visual -->
<section class="hero teaser">
  <div class="container is-max-desktop">
    <div class="hero-body">
      
      <!-- Top: Scene Selection -->
      <span class="control-label">1. Select Scene</span>
      <div class="btn-group" id="scene-selector">
          <button class="btn-scene is-active" onclick="setScene('Scene 1', this)">Scene 1</button>
          <button class="btn-scene" onclick="setScene('Scene 2', this)">Scene 2</button>
          <button class="btn-scene" onclick="setScene('Scene 3', this)">Scene 3</button>
      </div>

      <!-- Middle: Display Area -->
      <div class="comparison-container">
          <img id="main-display" src="" alt="Defogging Comparison" class="comparison-image">
      </div>
      <div id="method-debug" class="method-display-text"></div>

      <!-- Bottom: Controls -->
      <div class="controls-container">
        
        <!-- Pipeline Strategy (Tabs) -->
        <span class="control-label">2. Configure Pipeline Strategy</span>
        <div class="tabs is-toggle is-fullwidth is-small is-rounded" id="pipeline-tabs">
            <ul>
                <li class="is-active" data-tab="baselines" onclick="setStrategy('baselines')">
                    <a>
                        <span class="icon is-small"><i class="fas fa-grip-lines"></i></span>
                        <span>Baselines</span>
                        <span class="tab-badge" id="badge-baselines">Foggy</span>
                    </a>
                </li>
                <li data-tab="filter-only" onclick="setStrategy('filter-only')">
                    <a>
                        <span class="icon is-small"><i class="fas fa-filter"></i></span>
                        <span>Filter</span>
                        <span class="tab-badge" id="badge-filter-only">Filter A</span>
                    </a>
                </li>
                <li data-tab="model-only" onclick="setStrategy('model-only')">
                    <a>
                        <span class="icon is-small"><i class="fas fa-robot"></i></span>
                        <span>Model</span>
                        <span class="tab-badge" id="badge-model-only">Dehaze...</span>
                    </a>
                </li>
                <li data-tab="filter-model" onclick="setStrategy('filter-model')">
                    <a>
                        <span class="icon is-small"><i class="fas fa-arrow-right"></i></span>
                        <span>F&rarr;M</span>
                        <span class="tab-badge" id="badge-filter-model">Chain</span>
                    </a>
                </li>
                <li data-tab="model-filter" onclick="setStrategy('model-filter')">
                    <a>
                        <span class="icon is-small"><i class="fas fa-arrow-left"></i></span>
                        <span>M&rarr;F</span>
                        <span class="tab-badge" id="badge-model-filter">Chain</span>
                    </a>
                </li>
            </ul>
        </div>

        <!-- Component Selection (Dynamic) -->
        <div class="selector-row" id="selector-container">
            <!-- This content is injected by JS based on strategy -->
        </div>

      </div>
      
      <h2 class="subtitle has-text-centered" style="margin-top: 15px;">
        <span class="dnerf">Comparison</span> of 30+ defogging pipelines.
      </h2>
    </div>
  </div>
</section>


<section class="section">
  <div class="container is-max-desktop">
    <!-- Abstract. -->
    <div class="columns is-centered has-text-centered">
      <div class="column is-four-fifths">
        <h2 class="title is-3">Abstract</h2>
        <div class="content has-text-justified">
          <p>
            Autonomous driving perception systems are particularly vulnerable in foggy conditions, where light scattering reduces contrast and obscures fine details critical for safe operation. While numerous defogging methods exist—from handcrafted filters to learned restoration models—improvements in image fidelity do not consistently translate into better downstream detection and segmentation.
          </p>
          <p>
            We present a structured empirical study that benchmarks a comprehensive set of pipelines, including (i) classical filters, (ii) modern defogging networks, (iii) chained variants, and (iv) prompt-driven visual-language image editing models (VLM) applied directly to foggy images. Using Foggy Cityscapes, we assess both image quality and downstream performance on object detection (mAP) and segmentation (PQ, RQ, SQ).
          </p>
        </div>
      </div>
    </div>
  </div>
</section>


<section class="section">
  <div class="container is-max-desktop">
    <h2 class="title is-3 has-text-centered">Quantitative Results</h2>
    <div class="content">
      <div class="table-container">
        <table class="results-table">
          <thead>
            <tr>
              <th>Method</th>
              <th>mAP</th>
              <th>PQ</th>
              <th>RQ</th>
              <th>SQ</th>
              <th>Qual. Score</th>
            </tr>
          </thead>
          <tbody>
            <tr style="background-color: #e8f5e9; font-weight: bold;">
              <td>Ground Truth (GT)</td>
              <td>0.2560</td>
              <td>100.0</td>
              <td>100.0</td>
              <td>100.0</td>
              <td>34.81</td>
            </tr>
            <tr>
              <td>DehazeFormer Trained</td>
              <td>0.2557</td>
              <td>74.4</td>
              <td>83.9</td>
              <td>88.4</td>
              <td>29.74</td>
            </tr>
            <tr>
              <td>DehazeFormer Untrained</td>
              <td>0.2379</td>
              <td>63.0</td>
              <td>74.2</td>
              <td>84.6</td>
              <td>24.20</td>
            </tr>
            <tr>
              <td>Flux (CoT)</td>
              <td>0.2376</td>
              <td>59.7</td>
              <td>82.8</td>
              <td>71.7</td>
              <td>26.19</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</section>


<section class="section" id="BibTeX">
  <div class="container is-max-desktop content">
    <h2 class="title">BibTeX</h2>
    <pre><code>@inproceedings{aryashad2026vlmdefog,
  title={{From Filters to VLMs: Benchmarking Defogging Methods through Object Detection and Segmentation Performance}},
  author={Aryashad, Ardalan and Razmara, Parsa and Mahjoub, Amin and Azizi, Seyedarmin and Salmani, Mahdi and Firouzkouhi, Arad},
  booktitle={Winter Conference on Applications of Computer Vision (WACV)},
  year={2026}
}</code></pre>
  </div>
</section>


<footer class="footer">
  <div class="container">
    <div class="content has-text-centered">
      <a class="icon-link" href="https://arxiv.org/abs/2510.03906">
        <i class="fas fa-file-pdf"></i>
      </a>
      <a class="icon-link" href="https://github.com/prazmara/defog-detection-benchmark">
        <i class="fab fa-github"></i>
      </a>
    </div>
    <div class="columns is-centered">
      <div class="column is-8">
        <div class="content">
          <p>
            This website is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>.
          </p>
        </div>
      </div>
    </div>
  </div>
</footer>

<script>
    // --- Configuration ---
    const filters = ['Filter A', 'Filter B', 'Filter C', 'Filter D'];
    const models = ['DehazeFormer', 'Flux (CoT)', 'Model C'];
    const scenes = ['Scene 1', 'Scene 2', 'Scene 3'];
    const baselines = ['Foggy Input', 'Ground Truth'];

    // --- State Management ---
    let savedConfigs = {
        'baselines': { stage1: 'Foggy Input', stage2: null },
        'filter-only': { stage1: filters[0], stage2: null },
        'model-only': { stage1: models[0], stage2: null },
        'filter-model': { stage1: filters[0], stage2: models[0] },
        'model-filter': { stage1: models[0], stage2: filters[0] }
    };

    let activeState = {
        strategy: 'baselines',
        stage1: 'Foggy Input',
        stage2: null,
        scene: 'Scene 1'
    };

    // --- Initialization ---
    document.addEventListener('DOMContentLoaded', () => {
        renderSelectors();
        updateDisplay(); 
        updateAllBadges();
    });

    // --- Logic ---

    function setStrategy(strategy) {
        // Update active strategy
        activeState.strategy = strategy;
        
        // Load the SAVED configuration for this strategy
        const config = savedConfigs[strategy];
        activeState.stage1 = config.stage1;
        activeState.stage2 = config.stage2;

        updateTabsUI();
        renderSelectors();
        updateDisplay(); // Instant update
    }
    
    // Called when a dropdown changes
    function updateSelection(stage, value) {
        // 1. Update Active State
        if (stage === 1) activeState.stage1 = value;
        if (stage === 2) activeState.stage2 = value;

        // 2. Update Saved Configs (Memory)
        savedConfigs[activeState.strategy].stage1 = activeState.stage1;
        savedConfigs[activeState.strategy].stage2 = activeState.stage2;
        
        // 3. Update Badge Text for this strategy
        updateBadge(activeState.strategy);

        updateDisplay(); // Instant update
    }

    function setScene(sceneName, btn) {
        // Scenes update immediately
        activeState.scene = sceneName;
        
        // Update UI
        document.querySelectorAll('#scene-selector button').forEach(b => b.classList.remove('is-active'));
        btn.classList.add('is-active');

        updateDisplay();
    }

    function updateTabsUI() {
        document.querySelectorAll('#pipeline-tabs li').forEach(li => {
            if (li.getAttribute('data-tab') === activeState.strategy) {
                li.classList.add('is-active');
            } else {
                li.classList.remove('is-active');
            }
        });
    }

    // --- Badge Logic ---
    function updateAllBadges() {
        Object.keys(savedConfigs).forEach(strat => updateBadge(strat));
    }

    function updateBadge(strategy) {
        const config = savedConfigs[strategy];
        const badge = document.getElementById(`badge-${strategy}`);
        if (!badge) return;

        let text = '';
        if (strategy === 'filter-model' || strategy === 'model-filter') {
            text = 'Chain'; // Keep chains short
        } else {
            text = config.stage1;
        }
        
        // Truncate if very long manually if css fails (though CSS handles it)
        if (text.length > 12) {
            text = text.substring(0, 10) + '..';
        }
        
        badge.innerText = text;
    }


    // Dynamic Selector Rendering based on Strategy
    function renderSelectors() {
        const container = document.getElementById('selector-container');
        container.innerHTML = ''; // Clear current

        const strat = activeState.strategy;

        if (strat === 'baselines') {
            container.appendChild(createSelect('Baseline Method', baselines, activeState.stage1, (val) => {
                updateSelection(1, val);
            }));
        }
        else if (strat === 'filter-only') {
            container.appendChild(createSelect('Filter Method', filters, activeState.stage1, (val) => {
                updateSelection(1, val);
            }));
        }
        else if (strat === 'model-only') {
            container.appendChild(createSelect('Model Method', models, activeState.stage1, (val) => {
                updateSelection(1, val);
            }));
        } 
        else if (strat === 'filter-model') {
            container.appendChild(createSelect('Step 1: Filter', filters, activeState.stage1, (val) => {
                updateSelection(1, val);
            }));
            
            const arrow = document.createElement('div');
            arrow.innerHTML = '<i class="fas fa-arrow-right" style="color:#888; margin-top: 25px;"></i>';
            container.appendChild(arrow);
            
            container.appendChild(createSelect('Step 2: Model', models, activeState.stage2, (val) => {
                updateSelection(2, val);
            }));
        } 
        else if (strat === 'model-filter') {
            container.appendChild(createSelect('Step 1: Model', models, activeState.stage1, (val) => {
                updateSelection(1, val);
            }));

             const arrow = document.createElement('div');
             arrow.innerHTML = '<i class="fas fa-arrow-right" style="color:#888; margin-top: 25px;"></i>';
             container.appendChild(arrow);

            container.appendChild(createSelect('Step 2: Filter', filters, activeState.stage2, (val) => {
                updateSelection(2, val);
            }));
        }
    }

    // Helper to create Bulma select dropdowns
    function createSelect(label, options, selectedValue, onChange) {
        const wrapper = document.createElement('div');
        wrapper.className = 'select-wrapper';

        const labelEl = document.createElement('span');
        labelEl.className = 'select-label';
        labelEl.innerText = label;
        wrapper.appendChild(labelEl);

        const bulmaSelect = document.createElement('div');
        bulmaSelect.className = 'select';
        
        const select = document.createElement('select');
        options.forEach(opt => {
            const option = document.createElement('option');
            option.value = opt;
            option.innerText = opt;
            if (opt === selectedValue) option.selected = true;
            select.appendChild(option);
        });

        select.addEventListener('change', (e) => onChange(e.target.value));
        
        bulmaSelect.appendChild(select);
        wrapper.appendChild(bulmaSelect);
        
        return wrapper;
    }

    // --- Image Retrieval ---

    function getCompositeKey() {
        if (activeState.strategy === 'baselines' || activeState.strategy === 'filter-only' || activeState.strategy === 'model-only') {
            return activeState.stage1;
        } else {
            return `${activeState.stage1} + ${activeState.stage2}`;
        }
    }

    function updateDisplay() {
        const key = getCompositeKey();
        const scene = activeState.scene;

        // DEBUG: Display current selection text
        document.getElementById('method-debug').innerText = `Selected: ${key} on ${scene}`;

        // 1. Try to fetch from hardcoded dictionary
        let src = '';
        
        if (imagePaths[key] && imagePaths[key][scene]) {
            src = imagePaths[key][scene];
        } else {
            // Fallback generation
            const safeKey = encodeURIComponent(key);
            const safeScene = encodeURIComponent(scene);
            src = `https://placehold.co/800x400?text=${safeKey}+on+${safeScene}`;
        }

        const img = document.getElementById('main-display');
        img.style.opacity = '0.5';
        setTimeout(() => {
            img.src = src;
            img.style.opacity = '1';
        }, 150);
    }

    // --- Hardcoded Image Paths ---
    const imagePaths = {
        'Foggy Input': {
            'Scene 1': 'https://placehold.co/800x400?text=Foggy+Input+Scene+1',
            'Scene 2': 'https://placehold.co/800x400?text=Foggy+Input+Scene+2',
            'Scene 3': 'https://placehold.co/800x400?text=Foggy+Input+Scene+3'
        },
        'Ground Truth': {
            'Scene 1': 'https://placehold.co/800x400?text=GT+Scene+1',
            'Scene 2': 'https://placehold.co/800x400?text=GT+Scene+2',
            'Scene 3': 'https://placehold.co/800x400?text=GT+Scene+3'
        },
    };

</script>

</body>
</html>
