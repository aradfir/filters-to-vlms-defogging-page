<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="description"
        content="From Filters to VLMs: Benchmarking Defogging Methods through Object Detection and Segmentation Performance.">
  <meta name="keywords" content="Defogging, Object Detection, Segmentation, Autonomous Driving, VLM, Dehazing">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>From Filters to VLMs: Benchmarking Defogging Methods</title>

  <link href="https://fonts.googleapis.com/css?family=Google+Sans|Noto+Sans|Castoro" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jpswalsh/academicons@1/css/academicons.min.css">

  <style>
    body {
      font-family: 'Noto Sans', sans-serif;
    }
    .title.is-1 {
      font-family: 'Google Sans', sans-serif;
      font-weight: 700;
    }
    .title.is-2, .title.is-3 {
      font-family: 'Google Sans', sans-serif;
      font-weight: 500;
    }
    .publication-title {
      font-family: 'Google Sans', sans-serif;
    }
    .publication-authors {
      font-family: 'Google Sans', sans-serif;
    }
    .publication-venue {
        color: #555;
        width: 100%;
        font-weight: bold;
    }
    .footer .icon-link {
        font-size: 25px;
        color: #000;
    }
    .link-block a {
        margin-top: 5px;
        margin-bottom: 5px;
    }

    /* Comparison Container Styles */
    .comparison-container {
        position: relative;
        width: 100%;
        max-width: 800px;
        margin: 0 auto;
        border-radius: 8px;
        overflow: hidden;
        box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        background-color: #f5f5f5;
        min-height: 400px;
    }
    .comparison-image {
        width: 100%;
        height: auto;
        display: block;
        transition: opacity 0.3s ease;
    }
    
    /* Control Styles */
    .controls-container {
        max-width: 800px;
        margin: 0 auto;
        padding: 20px 0;
    }
    .control-label {
        font-family: 'Google Sans', sans-serif;
        font-weight: 600;
        color: #4a4a4a;
        margin-bottom: 8px;
        display: block;
        text-align: center;
    }
    
    /* Tabs Customization */
    .tabs.is-toggle li.is-active a {
        background-color: #3273dc;
        border-color: #3273dc;
    }
    .tabs.is-toggle {
        margin-bottom: 15px;
    }
    /* Make tabs wrap nicely on small screens */
    .tabs.is-toggle ul {
        flex-wrap: wrap;
        justify-content: center;
    }
    .tabs.is-toggle li {
        flex-grow: 1;
        flex-shrink: 0;
        min-width: 120px;
    }
    .tabs.is-toggle li a {
        flex-direction: column;
        padding: 8px 10px;
        min-height: 60px;
        justify-content: center;
    }
    .tabs.is-toggle li a > span:not(.tab-badge) {
        display: block;
    }
    
    /* Tab Badges */
    .tab-badge {
        font-size: 0.7rem;
        background-color: #eee;
        color: #333;
        border-radius: 4px;
        padding: 2px 8px;
        margin-left: 0;
        margin-top: 4px;
        max-width: 100%;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        font-weight: normal;
        display: block;
    }
    .tabs.is-toggle li.is-active .tab-badge {
        background-color: rgba(255,255,255,0.3);
        color: #fff;
    }

    /* Selector Row */
    .selector-row {
        display: flex;
        justify-content: center;
        gap: 15px;
        margin-bottom: 20px;
        align-items: center;
        flex-wrap: wrap;
    }
    .select-wrapper {
        text-align: left;
    }
    .select-label {
        font-size: 0.85em;
        font-weight: 600;
        color: #666;
        margin-bottom: 4px;
        display: block;
    }

    /* Scene Grid Selector */
    .scene-grid {
        display: flex;
        flex-direction: column;
        gap: 10px;
        margin-bottom: 25px;
        background: #fff;
        padding: 15px;
        border-radius: 8px;
        border: 1px solid #eee;
    }
    .scene-row {
        display: flex;
        align-items: center;
        gap: 15px;
    }
    .scene-row-label {
        width: 140px;
        font-weight: 600;
        text-align: right;
        font-size: 0.9rem;
        color: #555;
    }
    .scene-row-buttons {
        display: flex;
        gap: 8px;
        flex-wrap: wrap;
    }
    .btn-scene {
        background-color: #fff;
        border: 1px solid #dbdbdb;
        color: #363636;
        cursor: pointer;
        padding: 6px 12px;
        border-radius: 4px;
        font-size: 0.9rem;
        font-weight: 600;
        transition: all 0.2s;
    }
    .btn-scene:hover {
        background-color: #f5f5f5;
    }
    .btn-scene.is-active {
        background-color: #363636;
        color: #fff;
        border-color: #363636;
    }

    .teaser .hero-body {
        padding-top: 0;
        padding-bottom: 3rem;
    }
    .teaser {
        font-family: 'Google Sans', sans-serif;
    }
    
    /* Debug/Helper text */
    .method-display-text {
        text-align: center;
        font-size: 0.8em;
        color: #888;
        margin-top: 5px;
        font-family: monospace;
    }
  </style>
</head>
<body>

<section class="hero">
  <div class="hero-body">
    <div class="container is-max-desktop">
      <div class="columns is-centered">
        <div class="column has-text-centered">
          <h1 class="title is-1 publication-title">From Filters to VLMs: Benchmarking Defogging Methods through Object Detection and Segmentation Performance</h1>
          <div class="is-size-5 publication-authors">
            <span class="author-block">
              <a href="#">Ardalan Aryashad</a>,</span>
            <span class="author-block">
              <a href="#">Parsa Razmara</a>,</span>
            <span class="author-block">
              <a href="#">Amin Mahjoub</a>,</span>
            <span class="author-block">
              <a href="#">Seyedarmin Azizi</a>,</span>
            <span class="author-block">
              <a href="#">Mahdi Salmani</a>,</span>
            <span class="author-block">
              <a href="#">Arad Firouzkouhi</a>
            </span>
          </div>

          <div class="is-size-5 publication-authors">
            <span class="author-block">University of Southern California</span>
          </div>

          <div class="column has-text-centered">
            <div class="publication-links">
              <!-- PDF Link. -->
              <span class="link-block">
                <a href="https://arxiv.org/abs/2510.03906"
                   class="external-link button is-normal is-rounded is-dark">
                  <span class="icon">
                      <i class="fas fa-file-pdf"></i>
                  </span>
                  <span>Paper</span>
                </a>
              </span>
              <!-- Code Link. -->
              <span class="link-block">
                <a href="https://github.com/prazmara/defog-detection-benchmark"
                   class="external-link button is-normal is-rounded is-dark">
                  <span class="icon">
                      <i class="fab fa-github"></i>
                  </span>
                  <span>Code</span>
                  </a>
              </span>
              <!-- Data Links. -->
              <span class="link-block">
                <a href="https://www.cityscapes-dataset.com/dataset-overview/"
                   class="external-link button is-normal is-rounded is-dark">
                  <span class="icon">
                      <i class="far fa-images"></i>
                  </span>
                  <span>Cityscapes Dataset</span>
                  </a>
              </span>
              <span class="link-block">
                <a href="https://acdc.vision.ee.ethz.ch/"
                   class="external-link button is-normal is-rounded is-dark">
                  <span class="icon">
                      <i class="far fa-images"></i>
                  </span>
                  <span>ACDC Dataset</span>
                  </a>
              </span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Teaser / Main Visual -->
<section class="hero teaser">
  <div class="container is-max-desktop">
    <div class="hero-body">
      
      <!-- Top: Scene Selection Grid -->
      <span class="control-label">1. Select Dataset & Scene</span>
      <div class="scene-grid">
          <!-- Row 1: ACDC -->
          <div class="scene-row">
              <div class="scene-row-label">ACDC</div>
              <div class="scene-row-buttons">
                  <button class="btn-scene is-active" onclick="setScene('ACDC', 'Scene 1', this)">Scene 1</button>
                  <button class="btn-scene" onclick="setScene('ACDC', 'Scene 2', this)">Scene 2</button>
                  <button class="btn-scene" onclick="setScene('ACDC', 'Scene 3', this)">Scene 3</button>
              </div>
          </div>
          <!-- Row 2: Foggy Cityscapes -->
          <div class="scene-row">
              <div class="scene-row-label">Foggy Cityscapes</div>
              <div class="scene-row-buttons">
                  <button class="btn-scene" onclick="setScene('Cityscapes', 'Scene 1', this)">Scene 1</button>
                  <button class="btn-scene" onclick="setScene('Cityscapes', 'Scene 2', this)">Scene 2</button>
                  <button class="btn-scene" onclick="setScene('Cityscapes', 'Scene 3', this)">Scene 3</button>
              </div>
          </div>
      </div>

      <!-- Middle: Display Area -->
      <div class="comparison-container">
          <img id="main-display" src="" alt="Defogging Comparison" class="comparison-image" onerror="handleImageError(this)">
      </div>
      <div id="method-debug" class="method-display-text"></div>

      <!-- Bottom: Controls -->
      <div class="controls-container">
        
        <!-- Pipeline Strategy (Tabs) -->
        <span class="control-label">2. Configure Pipeline Strategy</span>
        <div class="tabs is-toggle is-fullwidth is-small is-rounded" id="pipeline-tabs">
            <ul>
                <li class="is-active" data-tab="baselines" onclick="setStrategy('baselines')">
                    <a>
                        <span class="icon is-small"><i class="fas fa-grip-lines"></i></span>
                        <span>Baselines</span>
                        <span class="tab-badge" id="badge-baselines">Foggy</span>
                    </a>
                </li>
                <li data-tab="filter-only" onclick="setStrategy('filter-only')">
                    <a>
                        <span class="icon is-small"><i class="fas fa-filter"></i></span>
                        <span>Filter</span>
                        <span class="tab-badge" id="badge-filter-only">CLAHE</span>
                    </a>
                </li>
                <li data-tab="model-only" onclick="setStrategy('model-only')">
                    <a>
                        <span class="icon is-small"><i class="fas fa-robot"></i></span>
                        <span>Model</span>
                        <span class="tab-badge" id="badge-model-only">Dehaze...</span>
                    </a>
                </li>
                <li data-tab="filter-model" onclick="setStrategy('filter-model')">
                    <a>
                        <span class="icon is-small"><i class="fas fa-arrow-right"></i></span>
                        <span>F&rarr;M</span>
                        <span class="tab-badge" id="badge-filter-model">Chain</span>
                    </a>
                </li>
                <li data-tab="model-filter" onclick="setStrategy('model-filter')">
                    <a>
                        <span class="icon is-small"><i class="fas fa-arrow-left"></i></span>
                        <span>M&rarr;F</span>
                        <span class="tab-badge" id="badge-model-filter">Chain</span>
                    </a>
                </li>
                <li data-tab="vlm" onclick="setStrategy('vlm')">
                    <a>
                        <span class="icon is-small"><i class="fas fa-brain"></i></span>
                        <span>Gen VLM</span>
                        <span class="tab-badge" id="badge-vlm">NanoBan...</span>
                    </a>
                </li>
            </ul>
        </div>

        <!-- Component Selection (Dynamic) -->
        <div class="selector-row" id="selector-container">
            <!-- This content is injected by JS based on strategy -->
        </div>

      </div>
      
      <h2 class="subtitle has-text-centered" style="margin-top: 15px;">
        <span class="dnerf">Comparison</span> of defogging pipelines on ACDC and Foggy Cityscapes datasets.
      </h2>
    </div>
  </div>
</section>

<section class="section">
  <div class="container is-max-desktop">
    <!-- Abstract. -->
    <div class="columns is-centered has-text-centered">
      <div class="column is-four-fifths">
        <h2 class="title is-3">Abstract</h2>
        <div class="content has-text-justified">
          <p>
            Autonomous driving perception systems are particularly vulnerable in foggy conditions, where light scattering reduces contrast and obscures fine details critical for safe operation. While numerous defogging methods exist, from handcrafted filters to learned restoration models, improvements in image fidelity do not consistently translate into better downstream detection and segmentation. Moreover, prior evaluations often rely on synthetic data, leaving questions about real-world transferability.
          </p>
          <p>
            We present a structured empirical study that benchmarks a comprehensive set of pipelines, including (i) classical dehazing filters, (ii) modern defogging networks, (iii) chained variants (filter→model, model→filter), and (iv) prompt-driven visual-language image editing models (VLM) applied directly to foggy images. To address the gap between simulated and physical environments, we employ both the synthetic Foggy Cityscapes dataset and the real-world Adverse Conditions Dataset with Correspondences (ACDC).
          </p>
          <p>
            Crucially, we examine the generalizability of these pipelines by evaluating performance on synthetic fog and real-world conditions. We assess both image quality and downstream performance in terms of object detection (mAP) and segmentation (PQ). Our analysis identifies when defogging is effective, the impact of combining models, and how VLMs compare to traditional approaches. Additionally, to evaluate the quality of dehazed images, we report qualitative rubric-based scores from both VLM and human judges, and discuss their alignment with down-stream task metrics, revealing reasonable correlations with mAP. Together, these results establish a transparent, task-oriented benchmark for defogging methods and highlight the conditions under which pre-processing genuinely enhances autonomous perception in adverse weather conditions.
          </p>
        </div>
      </div>
    </div>
  </div>
</section>


<section class="section">
  <div class="container is-max-desktop">
    <h2 class="title is-3 has-text-centered">Quantitative Results</h2>
    
    <!-- Main Performance Table -->
    <div class="content">
      <h3 class="title is-5 has-text-centered">Detection and Segmentation Performance</h3>
      <p class="has-text-centered" style="margin-bottom: 1rem; font-size: 0.9rem; color: #666;">
        mAP is reported in percentage (%), and PQ scores for Cityscapes are normalized relative to the ground truth image.
      </p>
      <div class="table-container">
        <table class="table is-striped is-hoverable is-fullwidth" style="font-size: 0.9rem;">
          <thead>
            <tr>
              <th>Base Method</th>
              <th>Next Method</th>
              <th colspan="2" style="text-align: center; border-left: 2px solid #ddd;">Cityscapes</th>
              <th colspan="2" style="text-align: center; border-left: 2px solid #ddd;">ACDC</th>
            </tr>
            <tr>
              <th></th>
              <th></th>
              <th style="border-left: 2px solid #ddd;">mAP%</th>
              <th>PQ</th>
              <th style="border-left: 2px solid #ddd;">mAP%</th>
              <th>PQ</th>
            </tr>
          </thead>
          <tbody>
            <tr style="background-color: #e8f5e9; font-weight: bold;">
              <td>GT</td>
              <td>None</td>
              <td style="border-left: 2px solid #ddd;"><strong>25.60</strong></td>
              <td><strong>100.0</strong></td>
              <td style="border-left: 2px solid #ddd;">N/A</td>
              <td>N/A</td>
            </tr>
            <tr>
              <td>Foggy</td>
              <td>None</td>
              <td style="border-left: 2px solid #ddd;">22.95</td>
              <td>57.9</td>
              <td style="border-left: 2px solid #ddd;"><strong>37.32</strong></td>
              <td><strong>48.5</strong></td>
            </tr>
            <tr style="border-top: 2px solid #ddd;">
              <td rowspan="4" style="vertical-align: middle;"><strong>DehazeFormer(Tr)</strong></td>
              <td>None</td>
              <td style="border-left: 2px solid #ddd;"><strong>25.57</strong></td>
              <td><strong>74.4</strong></td>
              <td style="border-left: 2px solid #ddd;"><strong>35.63</strong></td>
              <td><strong>44.5</strong></td>
            </tr>
            <tr>
              <td>CLAHE</td>
              <td style="border-left: 2px solid #ddd;">25.55</td>
              <td>70.3</td>
              <td style="border-left: 2px solid #ddd;">35.06</td>
              <td>38.5</td>
            </tr>
            <tr>
              <td>MSR</td>
              <td style="border-left: 2px solid #ddd;">25.30</td>
              <td>59.4</td>
              <td style="border-left: 2px solid #ddd;">31.05</td>
              <td>35.0</td>
            </tr>
            <tr>
              <td>DCP</td>
              <td style="border-left: 2px solid #ddd;">24.52</td>
              <td>69.9</td>
              <td style="border-left: 2px solid #ddd;">34.17</td>
              <td>38.0</td>
            </tr>
            <tr style="border-top: 2px solid #ddd;">
              <td rowspan="4" style="vertical-align: middle;"><strong>DehazeFormer</strong></td>
              <td>None</td>
              <td style="border-left: 2px solid #ddd;">23.79</td>
              <td>63.0</td>
              <td style="border-left: 2px solid #ddd;"><strong>38.04</strong></td>
              <td><strong>48.0</strong></td>
            </tr>
            <tr>
              <td>CLAHE</td>
              <td style="border-left: 2px solid #ddd;"><strong>24.45</strong></td>
              <td>62.4</td>
              <td style="border-left: 2px solid #ddd;">37.98</td>
              <td>46.6</td>
            </tr>
            <tr>
              <td>DCP</td>
              <td style="border-left: 2px solid #ddd;">24.09</td>
              <td><strong>64.2</strong></td>
              <td style="border-left: 2px solid #ddd;">34.18</td>
              <td>42.1</td>
            </tr>
            <tr>
              <td>MSR</td>
              <td style="border-left: 2px solid #ddd;">23.36</td>
              <td>59.4</td>
              <td style="border-left: 2px solid #ddd;">33.89</td>
              <td>43.9</td>
            </tr>
            <tr style="border-top: 2px solid #ddd;">
              <td rowspan="5" style="vertical-align: middle;"><strong>CLAHE</strong></td>
              <td>None</td>
              <td style="border-left: 2px solid #ddd;">23.83</td>
              <td>58.0</td>
              <td style="border-left: 2px solid #ddd;">37.73</td>
              <td><strong>47.0</strong></td>
            </tr>
            <tr>
              <td>Dehaze(Tr)</td>
              <td style="border-left: 2px solid #ddd;"><strong>25.05</strong></td>
              <td><strong>69.9</strong></td>
              <td style="border-left: 2px solid #ddd;">34.77</td>
              <td>40.7</td>
            </tr>
            <tr>
              <td>Dehaze</td>
              <td style="border-left: 2px solid #ddd;">24.10</td>
              <td>61.1</td>
              <td style="border-left: 2px solid #ddd;"><strong>37.97</strong></td>
              <td>46.8</td>
            </tr>
            <tr>
              <td>FocalNet</td>
              <td style="border-left: 2px solid #ddd;">23.85</td>
              <td>60.9</td>
              <td style="border-left: 2px solid #ddd;">37.88</td>
              <td>46.7</td>
            </tr>
            <tr>
              <td>MITNet</td>
              <td style="border-left: 2px solid #ddd;">23.28</td>
              <td>56.1</td>
              <td style="border-left: 2px solid #ddd;">32.59</td>
              <td>46.0</td>
            </tr>
            <tr style="border-top: 2px solid #ddd;">
              <td rowspan="5" style="vertical-align: middle;"><strong>MSR</strong></td>
              <td>None</td>
              <td style="border-left: 2px solid #ddd;">23.18</td>
              <td>50.7</td>
              <td style="border-left: 2px solid #ddd;">33.46</td>
              <td><strong>44.5</strong></td>
            </tr>
            <tr>
              <td>Dehaze(Tr)</td>
              <td style="border-left: 2px solid #ddd;"><strong>24.35</strong></td>
              <td><strong>53.2</strong></td>
              <td style="border-left: 2px solid #ddd;">32.09</td>
              <td>31.8</td>
            </tr>
            <tr>
              <td>Dehaze</td>
              <td style="border-left: 2px solid #ddd;">23.43</td>
              <td>51.5</td>
              <td style="border-left: 2px solid #ddd;"><strong>34.74</strong></td>
              <td>44.4</td>
            </tr>
            <tr>
              <td>FocalNet</td>
              <td style="border-left: 2px solid #ddd;">23.51</td>
              <td>51.7</td>
              <td style="border-left: 2px solid #ddd;">33.74</td>
              <td>44.4</td>
            </tr>
            <tr>
              <td>MITNet</td>
              <td style="border-left: 2px solid #ddd;">23.38</td>
              <td>57.9</td>
              <td style="border-left: 2px solid #ddd;">33.04</td>
              <td>34.1</td>
            </tr>
            <tr style="border-top: 2px solid #ddd;">
              <td rowspan="5" style="vertical-align: middle;"><strong>DCP</strong></td>
              <td>None</td>
              <td style="border-left: 2px solid #ddd;">23.69</td>
              <td>64.0</td>
              <td style="border-left: 2px solid #ddd;"><strong>35.08</strong></td>
              <td><strong>43.0</strong></td>
            </tr>
            <tr>
              <td>Dehaze(Tr)</td>
              <td style="border-left: 2px solid #ddd;"><strong>23.76</strong></td>
              <td><strong>64.8</strong></td>
              <td style="border-left: 2px solid #ddd;">33.14</td>
              <td>36.1</td>
            </tr>
            <tr>
              <td>Dehaze</td>
              <td style="border-left: 2px solid #ddd;">23.45</td>
              <td>64.2</td>
              <td style="border-left: 2px solid #ddd;">34.14</td>
              <td>42.3</td>
            </tr>
            <tr>
              <td>MITNet</td>
              <td style="border-left: 2px solid #ddd;">23.58</td>
              <td>59.5</td>
              <td style="border-left: 2px solid #ddd;">6.51</td>
              <td>9.7</td>
            </tr>
            <tr>
              <td>FocalNet</td>
              <td style="border-left: 2px solid #ddd;">23.47</td>
              <td>63.6</td>
              <td style="border-left: 2px solid #ddd;">34.58</td>
              <td>42.4</td>
            </tr>
            <tr style="border-top: 2px solid #ddd;">
              <td rowspan="4" style="vertical-align: middle;"><strong>FocalNet</strong></td>
              <td>None</td>
              <td style="border-left: 2px solid #ddd;">23.53</td>
              <td>62.6</td>
              <td style="border-left: 2px solid #ddd;"><strong>37.27</strong></td>
              <td><strong>48.0</strong></td>
            </tr>
            <tr>
              <td>CLAHE</td>
              <td style="border-left: 2px solid #ddd;"><strong>23.85</strong></td>
              <td>60.4</td>
              <td style="border-left: 2px solid #ddd;">37.32</td>
              <td>45.5</td>
            </tr>
            <tr>
              <td>DCP</td>
              <td style="border-left: 2px solid #ddd;">23.56</td>
              <td><strong>62.8</strong></td>
              <td style="border-left: 2px solid #ddd;">34.47</td>
              <td>41.3</td>
            </tr>
            <tr>
              <td>MSR</td>
              <td style="border-left: 2px solid #ddd;">21.71</td>
              <td>51.7</td>
              <td style="border-left: 2px solid #ddd;">32.77</td>
              <td>43.4</td>
            </tr>
            <tr style="border-top: 2px solid #ddd;">
              <td rowspan="4" style="vertical-align: middle;"><strong>MITNet</strong></td>
              <td>None</td>
              <td style="border-left: 2px solid #ddd;">22.51</td>
              <td><strong>57.9</strong></td>
              <td style="border-left: 2px solid #ddd;"><strong>28.32</strong></td>
              <td><strong>31.5</strong></td>
            </tr>
            <tr>
              <td>CLAHE</td>
              <td style="border-left: 2px solid #ddd;"><strong>22.79</strong></td>
              <td>56.1</td>
              <td style="border-left: 2px solid #ddd;">28.13</td>
              <td>27.9</td>
            </tr>
            <tr>
              <td>DCP</td>
              <td style="border-left: 2px solid #ddd;">22.38</td>
              <td>56.8</td>
              <td style="border-left: 2px solid #ddd;">27.89</td>
              <td>22.7</td>
            </tr>
            <tr>
              <td>MSR</td>
              <td style="border-left: 2px solid #ddd;">21.51</td>
              <td>51.0</td>
              <td style="border-left: 2px solid #ddd;">22.68</td>
              <td>25.2</td>
            </tr>
            <tr style="border-top: 2px solid #ddd;">
              <td rowspan="2" style="vertical-align: middle;"><strong>Flux</strong></td>
              <td>CoT Prompt</td>
              <td style="border-left: 2px solid #ddd;"><strong>23.76</strong></td>
              <td><strong>59.7</strong></td>
              <td style="border-left: 2px solid #ddd;"><strong>37.78</strong></td>
              <td><strong>46.6</strong></td>
            </tr>
            <tr>
              <td>Base Prompt</td>
              <td style="border-left: 2px solid #ddd;">23.06</td>
              <td>55.5</td>
              <td style="border-left: 2px solid #ddd;">29.47</td>
              <td>43.2</td>
            </tr>
            <tr style="border-top: 2px solid #ddd;">
              <td><strong>NanoBanana</strong></td>
              <td>Base Prompt</td>
              <td style="border-left: 2px solid #ddd;">19.41</td>
              <td>61.2</td>
              <td style="border-left: 2px solid #ddd;">23.48</td>
              <td>39.8</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- Qualitative Metrics Table -->
    <div class="content" style="margin-top: 3rem;">
      <h3 class="title is-5 has-text-centered">Qualitative VLM-Judge Metrics</h3>
      <p class="has-text-centered" style="margin-bottom: 1rem; font-size: 0.9rem; color: #666;">
        Scores from 0 to 5. All models applied to Cityscapes Dataset. Values in parentheses indicate average human judge scores.
      </p>
      <div class="table-container">
        <table class="table is-striped is-hoverable" style="margin: 0 auto; max-width: 700px; font-size: 0.9rem;">
          <thead>
            <tr>
              <th>Method</th>
              <th style="text-align: center;">Visibility<br>Restoration</th>
              <th style="text-align: center;">Boundary<br>Clarity</th>
              <th style="text-align: center;">Perceived<br>Detectability</th>
            </tr>
          </thead>
          <tbody>
            <tr style="background-color: #e8f5e9; font-weight: bold;">
              <td>Ground Truth (GT)</td>
              <td style="text-align: center;">4.95</td>
              <td style="text-align: center;">4.95</td>
              <td style="text-align: center;">4.95</td>
            </tr>
            <tr>
              <td>Flux (CoT Prompt)</td>
              <td style="text-align: center;"><strong>4.30</strong> (3.95)</td>
              <td style="text-align: center;">3.92 (3.28)</td>
              <td style="text-align: center;"><strong>4.22</strong> (4.12)</td>
            </tr>
            <tr>
              <td>Flux (Baseline Prompt)</td>
              <td style="text-align: center;">1.22 (2.32)</td>
              <td style="text-align: center;">1.21 (1.43)</td>
              <td style="text-align: center;">1.22 (1.58)</td>
            </tr>
            <tr>
              <td>DehazeFormer (Trained)</td>
              <td style="text-align: center;">4.07 (3.74)</td>
              <td style="text-align: center;"><strong>3.96</strong> (3.55)</td>
              <td style="text-align: center;">4.07 (3.95)</td>
            </tr>
            <tr>
              <td>DehazeFormer</td>
              <td style="text-align: center;">2.17 (2.40)</td>
              <td style="text-align: center;">2.17 (2.65)</td>
              <td style="text-align: center;">2.18 (1.95)</td>
            </tr>
            <tr>
              <td>NanoBanana</td>
              <td style="text-align: center;">2.44 (2.35)</td>
              <td style="text-align: center;">2.44 (2.85)</td>
              <td style="text-align: center;">2.44 (3.05)</td>
            </tr>
          </tbody>
        </table>
      </div>
      
      <!-- Qualitative Metrics Visualization -->
      <div style="margin-top: 2rem; text-align: center;">
        <img src="./static/qualitative_metrics_plot.png" 
             alt="Qualitative Metrics Visualization" 
             style="max-width: 100%; height: auto; border-radius: 8px; box-shadow: 0 4px 8px rgba(0,0,0,0.1);">
      </div>
    </div>
  </div>
</section>


<section class="section" id="BibTeX">
  <div class="container is-max-desktop content">
    <h2 class="title">BibTeX</h2>
    <pre><code>@inproceedings{aryashad2026vlmdefog,
  title={{From Filters to VLMs: Benchmarking Defogging Methods through Object Detection and Segmentation Performance}},
  author={Aryashad, Ardalan and Razmara, Parsa and Mahjoub, Amin and Azizi, Seyedarmin and Salmani, Mahdi and Firouzkouhi, Arad},
  booktitle={Winter Conference on Applications of Computer Vision (WACV)},
  year={2026}
}</code></pre>
  </div>
</section>
<footer class="footer">
  <div class="container">
    <div class="content has-text-centered">
      <a class="icon-link" href="https://arxiv.org/abs/2510.03906">
        <i class="fas fa-file-pdf"></i>
      </a>
      <a class="icon-link" href="https://github.com/prazmara/defog-detection-benchmark">
        <i class="fab fa-github"></i>
      </a>
    </div>
    <div class="columns is-centered">
      <div class="column is-8">
        <div class="content">
          <p>
            This website is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>.
          </p>
        </div>
      </div>
    </div>
  </div>
</footer>

<script>
    // --- Data Definitions ---
    
    // Method Definitions with Label -> Folder Name mapping
    const methodMap = {
        // Filters
        'CLAHE': 'clh',
        'DCP': 'dcp',
        'MSR': 'msr',
        
        // Models
        'DehazeFormer (Base)': 'dhf',
        'DehazeFormer (Retrained)': 'dhft',
        'FocalNet': 'fcn',
        'MITNet': 'mit',
        
        // VLMs
        'NanoBanana': 'nanobanana',
        'Flux + CoT': 'flux_cot',
        'Flux (Base)': 'flux_base',
    };
    
    // Reverse map for labels
    const filters = ['CLAHE', 'DCP', 'MSR'];
    const models = ['DehazeFormer (Base)', 'DehazeFormer (Retrained)', 'FocalNet', 'MITNet'];
    const vlms = ['Flux + CoT', 'Flux (Base)', 'NanoBanana'];
    const baselines = ['Foggy Input', 'Ground Truth'];

    // Scene Definitions - Updated with actual filenames from directories
    const sceneConfig = {
        'ACDC': {
            'Scene 1': 'GOPR0476_frame_000845_rgb_anon.png',
            'Scene 2': 'GOPR0476_frame_000884_rgb_anon.png', 
            'Scene 3': 'GOPR0476_frame_000921_rgb_anon.png'
        },
        'Cityscapes': {
            'Scene 1': 'frankfurt_000000_001236',
            'Scene 2': 'frankfurt_000000_016286',
            'Scene 3': 'frankfurt_000000_003357'
        }
    };

    // --- State Management ---
    let savedConfigs = {
        'baselines': { stage1: 'Foggy Input', stage2: null },
        'filter-only': { stage1: filters[0], stage2: null },
        'model-only': { stage1: models[0], stage2: null },
        'filter-model': { stage1: filters[0], stage2: models[0] },
        'model-filter': { stage1: models[0], stage2: filters[0] },
        'vlm': { stage1: vlms[0], stage2: null }
    };

    let activeState = {
        dataset: 'ACDC',
        scene: 'Scene 1',
        strategy: 'baselines',
        stage1: 'Foggy Input',
        stage2: null
    };

    // --- Initialization ---
    document.addEventListener('DOMContentLoaded', () => {
        renderSelectors();
        updateDisplay(); 
        updateAllBadges();
    });

    // --- Logic ---

    function setScene(dataset, sceneName, btn) {
        activeState.dataset = dataset;
        activeState.scene = sceneName;
        
        // Update UI: Remove active from ALL scene buttons first
        document.querySelectorAll('.btn-scene').forEach(b => b.classList.remove('is-active'));
        // Add active to clicked
        btn.classList.add('is-active');

        updateDisplay();
    }

    function setStrategy(strategy) {
        activeState.strategy = strategy;
        
        const config = savedConfigs[strategy];
        activeState.stage1 = config.stage1;
        activeState.stage2 = config.stage2;

        updateTabsUI();
        renderSelectors();
        updateDisplay();
    }
    
    function updateSelection(stage, value) {
        if (stage === 1) activeState.stage1 = value;
        if (stage === 2) activeState.stage2 = value;

        savedConfigs[activeState.strategy].stage1 = activeState.stage1;
        savedConfigs[activeState.strategy].stage2 = activeState.stage2;
        
        updateBadge(activeState.strategy);
        updateDisplay();
    }

    function updateTabsUI() {
        document.querySelectorAll('#pipeline-tabs li').forEach(li => {
            if (li.getAttribute('data-tab') === activeState.strategy) {
                li.classList.add('is-active');
            } else {
                li.classList.remove('is-active');
            }
        });
    }

    function updateAllBadges() {
        Object.keys(savedConfigs).forEach(strat => updateBadge(strat));
    }

    function updateBadge(strategy) {
        const config = savedConfigs[strategy];
        const badge = document.getElementById(`badge-${strategy}`);
        if (!badge) return;

        let text = '';
        if (strategy === 'filter-model' || strategy === 'model-filter') {
            text = 'Chain'; 
        } else {
            text = config.stage1;
        }
        if (text.length > 12) text = text.substring(0, 10) + '..';
        badge.innerText = text;
    }

    function renderSelectors() {
        const container = document.getElementById('selector-container');
        container.innerHTML = ''; 

        const strat = activeState.strategy;

        if (strat === 'baselines') {
            container.appendChild(createSelect('Baseline Method', baselines, activeState.stage1, (val) => updateSelection(1, val)));
        }
        else if (strat === 'filter-only') {
            container.appendChild(createSelect('Filter Method', filters, activeState.stage1, (val) => updateSelection(1, val)));
        }
        else if (strat === 'model-only') {
            container.appendChild(createSelect('Model Method', models, activeState.stage1, (val) => updateSelection(1, val)));
        }
        else if (strat === 'vlm') {
            container.appendChild(createSelect('VLM Method', vlms, activeState.stage1, (val) => updateSelection(1, val)));
        }
        else if (strat === 'filter-model') {
            container.appendChild(createSelect('Step 1: Filter', filters, activeState.stage1, (val) => updateSelection(1, val)));
            const arrow = document.createElement('div');
            arrow.innerHTML = '<i class="fas fa-arrow-right" style="color:#888; margin-top: 25px;"></i>';
            container.appendChild(arrow);
            container.appendChild(createSelect('Step 2: Model', models, activeState.stage2, (val) => updateSelection(2, val)));
        } 
        else if (strat === 'model-filter') {
            container.appendChild(createSelect('Step 1: Model', models, activeState.stage1, (val) => updateSelection(1, val)));
            const arrow = document.createElement('div');
            arrow.innerHTML = '<i class="fas fa-arrow-right" style="color:#888; margin-top: 25px;"></i>';
            container.appendChild(arrow);
            container.appendChild(createSelect('Step 2: Filter', filters, activeState.stage2, (val) => updateSelection(2, val)));
        }
    }

    function createSelect(label, options, selectedValue, onChange) {
        const wrapper = document.createElement('div');
        wrapper.className = 'select-wrapper';
        const labelEl = document.createElement('span');
        labelEl.className = 'select-label';
        labelEl.innerText = label;
        wrapper.appendChild(labelEl);
        const bulmaSelect = document.createElement('div');
        bulmaSelect.className = 'select';
        const select = document.createElement('select');
        options.forEach(opt => {
            const option = document.createElement('option');
            option.value = opt;
            option.innerText = opt;
            if (opt === selectedValue) option.selected = true;
            select.appendChild(option);
        });
        select.addEventListener('change', (e) => onChange(e.target.value));
        bulmaSelect.appendChild(select);
        wrapper.appendChild(bulmaSelect);
        return wrapper;
    }

    // --- Path Generation Logic ---

    function getFolderAndFile() {
        const ds = activeState.dataset;
        const strat = activeState.strategy;
        const s1 = activeState.stage1;
        const s2 = activeState.stage2;
        const sceneKey = sceneConfig[ds][activeState.scene];
        
        const abbr1 = s1 ? methodMap[s1] : '';
        const abbr2 = s2 ? methodMap[s2] : '';

        if (ds === 'Cityscapes') {
            // Extract city name from scene key
            const city = sceneKey.split('_')[0]; // frankfurt, lindau, munster
            let folder = '';
            let suffix = '_leftImg8bit.png';

            if (strat === 'baselines') {
                if (s1 === 'Foggy Input') {
                    folder = 'foggy_beta_0.01';
                } else if (s1 === 'Ground Truth') {
                    folder = 'leftImg8bit';
                }
            }
            else if (strat === 'filter-only') {
                // Filter-only uses foggy_beta_0.01_{filter} format
                // CLAHE uses uppercase, others use lowercase
                let filterSuffix = abbr1 === 'clh' ? 'CLAHE' : abbr1;
                folder = `foggy_beta_0.01_${filterSuffix}`;
            }
            else if (strat === 'model-only') {
                // Model-only uses b01_{model} format
                folder = `b01_${abbr1}`;
            }
            else if (strat === 'vlm') {
                // VLM uses b01_{vlm} format with special suffixes
                folder = `b01_${abbr1}`;
                if (s1 === 'Flux + CoT') {
                    suffix = '_leftImg8bit_foggy_beta_0.01_defogged.png';
                } else if (s1 === 'Flux (Base)') {
                    suffix = '_leftImg8bit_foggy_beta_0.01_defogged.png';
                } else if (s1 === 'NanoBanana') {
                    suffix = '_defogged_nano.png';
                }
            }
            else if (strat === 'filter-model') {
                // Filter then Model: b01_{filter}_{model}
                // All use lowercase for filters in chains
                folder = `b01_${abbr1}_${abbr2}`;
            }
            else if (strat === 'model-filter') {
                // Model then Filter: b01_{model}_{filter}
                // CLAHE uses lowercase 'clh' in chains
                folder = `b01_${abbr1}_${abbr2}`;
            }
            
            return `./static/foggy_cityscape/${folder}/val/${city}/${sceneKey}${suffix}`;

        } else {
            // ACDC Dataset
            const filename = sceneKey;
            let folder = '';
            let suffix = '';

            if (strat === 'baselines') {
                if (s1 === 'Foggy Input') {
                    folder = 'rgb_anon';
                } else if (s1 === 'Ground Truth') {
                    // GT has special nested structure
                    const seq = filename.split('_')[0]; // GOPR0476 or GP010476 or GP020475
                    const base = filename.replace('_rgb_anon.png', '');
                    return `./static/ACDC/gt_panoptic/fog/val/${seq}/${base}_gt_panoptic.png`;
                }
            }
            else if (strat === 'filter-only') {
                folder = abbr1;
            }
            else if (strat === 'model-only') {
                folder = abbr1;
            }
            else if (strat === 'vlm') {
                // VLM methods use their abbreviation as folder name with special suffixes
                folder = abbr1;
                if (s1 === 'Flux + CoT') {
                    // Replace _rgb_anon.png with _rgb_anon_defogged.png
                    const base = filename.replace('_rgb_anon.png', '');
                    return `./static/ACDC/${folder}/${base}_rgb_anon_defogged.png`;
                } else if (s1 === 'Flux (Base)') {
                    // Replace _rgb_anon.png with _rgb_anon_defogged.png
                    const base = filename.replace('_rgb_anon.png', '');
                    return `./static/ACDC/${folder}/${base}_rgb_anon_defogged.png`;
                } else if (s1 === 'NanoBanana') {
                    // Replace .png with _defogged.png (keeps _rgb_anon)
                    const base = filename.replace('.png', '');
                    return `./static/ACDC/${folder}/${base}_defogged.png`;
                }
            }
            else if (strat === 'filter-model') {
                folder = `${abbr1}_${abbr2}`;
            }
            else if (strat === 'model-filter') {
                // Model->Filter chains in ACDC use uppercase CLAHE
                let filterAbbr = abbr2 === 'clh' ? 'CLAHE' : abbr2;
                folder = `${abbr1}_${filterAbbr}`;
            }
            
            return `./static/ACDC/${folder}/${filename}`;
        }
    }

    function updateDisplay() {
        const path = getFolderAndFile();
        
        // Debug Text
        const stratInfo = (activeState.strategy.includes('chain') || activeState.strategy.includes('-')) 
            ? `${activeState.stage1} + ${activeState.stage2 || ''}` 
            : activeState.stage1;
        document.getElementById('method-debug').innerText = 
            `Dataset: ${activeState.dataset} | Scene: ${activeState.scene} | Method: ${stratInfo}\nPath: ${path}`;

        const img = document.getElementById('main-display');
        img.style.opacity = '0.5';
        console.log('Loading image from path:', path);
        console.log('Full URL:', new URL(path, window.location.href).href);
        setTimeout(() => {
            img.src = path;
            img.style.opacity = '1';
        }, 50);
    }
    
    function handleImageError(img) {
        // Fallback to placeholder if local file is missing
        const text = encodeURIComponent("Image Not Found\n" + activeState.dataset + "\n" + activeState.strategy);
        img.src = `https://placehold.co/800x400?text=${text}`;
    }

</script>

</body>
</html>